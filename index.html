<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Wikiprocessor Statistics</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
var chart1 = {
    statistics: null,
    isInit: true,
    chart: {
        type: 'bar',
        animation: false,
        marginRight: 130,
        marginBottom: 30
    },
    title: {
        text: 'Wikiprocessor Statistics'
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Cikkek sz√°ma (darab)',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' darab'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        },
        series: {
            animation: false
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -100,
        y: 100,
        floating: true,
        borderWidth: 1,
        backgroundColor: '#FFFFFF',
        shadow: true
    },
    series: []
};

Object.values = function (obj) {
    var vals = [];
    for( var key in obj ) {
        if ( obj.hasOwnProperty(key) ) {
            vals.push(obj[key]);
        }
    }
    return vals;
};

function drawChart(place, chart) {
    if (isInit) {
        for(var key in chart.statistics) {
            var serie = {};
            serie["name"] = key;
            serie["data"] = [];
            chart.series.push(serie);
        }
        chart.isInit = false;
    }
    chart.series.forEach(function(entry,index) {
        entry.data = [chart.statistics[entry.name]];
    });
    $(place).highcharts(chart);
};

$(setInterval(function(){
$.ajax({
    dataType: "json",
    url: "http://192.168.201.34:8080/api",
    success: function(data) {
        chart1.statistics = data.articlesData;
        drawChart('#container1', chart1);
    }
})
},3000));
        </script>
    </head>
    <body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container1" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<div id="container2" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html>
